{"version":3,"sources":["file:///D:/cocos/badminton/badminton/assets/Scripts/PlayerController.ts"],"names":["_decorator","Component","input","Input","KeyCode","Vec2","RigidBody2D","ccclass","property","PlayerController","_starMove","Body","_isJump","_isMove","jumpSpeed","moveSpeed","start","getComponent","Bounce","speed","applyLinearImpulseToCenter","initInput","cur","on","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","off","event","keyCode","KEY_A","node","getChildByName","setScale","KEY_D","KEY_W","update","deltaTime","applyForceToCenter"],"mappings":"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","sourcesContent":["import { _decorator, Component, input, Node, Input, EventKeyboard, KeyCode, Vec3, Vec2, RigidBody2D } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('PlayerController')\r\nexport class PlayerController extends Component {\r\n    _starMove: boolean = false;\r\n    public Body: RigidBody2D | null = null;\r\n\r\n    public _isJump: boolean = false;\r\n    public _isMove: boolean = false;\r\n    private jumpSpeed: number = 0;\r\n    private moveSpeed: number = 0;\r\n    start() {\r\n        this.Body = this.getComponent(RigidBody2D);\r\n    }\r\n    Bounce(speed: number) {\r\n        this.Body.applyLinearImpulseToCenter(new Vec2(0, speed), true);\r\n    }\r\n    initInput(cur: boolean) {\r\n        if (cur) {\r\n            input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n            input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n        } else {\r\n            input.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n            input.off(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n        }\r\n    }\r\n    onKeyDown(event: EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case KeyCode.KEY_A:\r\n                this.node.getChildByName(\"Player\").setScale(-1, 1);\r\n                this._isMove = true;\r\n                this.moveSpeed = -0.3;\r\n                break;\r\n            case KeyCode.KEY_D:\r\n                this.node.getChildByName(\"Player\").setScale(1, 1);\r\n                this._isMove = true;\r\n                this.moveSpeed = 0.3;\r\n                break;\r\n            case KeyCode.KEY_W:\r\n                this._isJump = true;\r\n                this.jumpSpeed = 1000;\r\n                break;\r\n        }\r\n    }\r\n    onKeyUp(event: EventKeyboard) {\r\n        switch (event.keyCode) {\r\n            case KeyCode.KEY_A:\r\n                this._isMove = false;\r\n                this.moveSpeed = 0;\r\n                break;\r\n            case KeyCode.KEY_D:\r\n                this._isMove = false;\r\n                this.moveSpeed = 0;\r\n                break;\r\n            case KeyCode.KEY_W:\r\n        }\r\n    }\r\n\r\n\r\n    update(deltaTime: number) {\r\n        if (this._isJump) {\r\n            this.Body.applyForceToCenter(new Vec2(0, this.jumpSpeed), true);\r\n            this._isJump = false;\r\n        }\r\n        if (this._isMove) {\r\n            this.Body.applyLinearImpulseToCenter(new Vec2(this.moveSpeed, 0), true);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}